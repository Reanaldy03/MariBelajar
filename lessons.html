<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pelajaran Kursus - MariBelajar</title>
    <!-- Bootstrap 5 CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="bootstrap/css/maribelajar.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body {
            background: #f7f9fb;
        }
        
        .lessons-hero {
            background: linear-gradient(135deg, #1976f6 0%, #4f8cff 100%);
            color: white;
            padding: 64px 0 32px;
        }
        
        .sidebar-lessons {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
            padding: 24px 0;
            min-height: 400px;
        }
        
        .sidebar-lessons .list-group-item {
            border: none;
            border-radius: 0;
            font-weight: 500;
            font-size: 1.05rem;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
        }
        
        .sidebar-lessons .list-group-item.active {
            background: #1976f6;
            color: #fff;
        }
        
        .lesson-content {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
            padding: 32px;
            min-height: 400px;
        }
        
        .lesson-video {
            width: 100%;
            max-width: 720px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(25, 118, 246, 0.08);
            margin-bottom: 24px;
        }
        
        .quiz-block {
            background: #f3f8ff;
            border-radius: 12px;
            padding: 24px;
            margin-top: 32px;
        }
        
        .quiz-block h5 {
            color: #1976f6;
        }
        
        .quiz-option label {
            display: block;
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid #e0e6ed;
            margin-bottom: 8px;
            cursor: pointer;
            transition: background 0.15s, border-color 0.15s;
        }
        
        .quiz-option input[type="radio"]:checked+label {
            background: #1976f6;
            color: #fff;
            border-color: #1976f6;
        }
        
        @media (max-width: 991px) {
            .lesson-content,
            .sidebar-lessons {
                padding: 18px;
            }
        }
        
        @media (max-width: 767px) {
            .lessons-hero {
                padding: 36px 0 18px;
            }
            .lesson-content,
            .sidebar-lessons {
                border-radius: 8px;
            }
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="fas fa-graduation-cap text-primary me-2"></i>
                MariBelajar
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <i class="fas fa-home me-1"></i>Beranda
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="courses.html">
                            <i class="fas fa-book me-1"></i>Kursus
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">
                            <i class="fas fa-info-circle me-1"></i>Tentang
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">
                            <i class="fas fa-envelope me-1"></i>Kontak
                        </a>
                    </li>
                </ul>
                
                <div class="d-flex align-items-center">
                    <a href="login.html" class="btn btn-outline-primary me-2">
                        <i class="fas fa-sign-in-alt me-1"></i>Masuk
                    </a>
                    <a href="register.html" class="btn btn-primary">
                        <i class="fas fa-user-plus me-1"></i>Daftar
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="lessons-hero mb-4">
        <div class="container">
            <h1 class="display-6 fw-bold mb-1" id="courseTitle">Pelajaran Kursus</h1>
            <p class="lead mb-0" id="courseDesc">Materi dan latihan interaktif untuk meningkatkan pemahaman Anda.</p>
        </div>
    </section>

    <section class="mb-5">
        <div class="container">
            <div class="row g-4">
                <!-- Sidebar Daftar Pelajaran -->
                <div class="col-lg-4">
                    <div class="sidebar-lessons">
                        <h5 class="px-4 mb-3">Daftar Pelajaran</h5>
                        <div class="list-group list-group-flush" id="lessonList"></div>
                    </div>
                </div>
                <!-- Konten Pelajaran -->
                <div class="col-lg-8">
                    <div class="lesson-content">
                        <h3 id="lessonTitle">Judul Pelajaran</h3>
                        <video id="lessonVideo" class="lesson-video" controls poster="images/kursus.jpg">
                            <source id="videoSource" src="" type="video/mp4">
                            Browser Anda tidak mendukung video.
                        </video>
                        <div id="lessonTopics" class="mb-3"></div>
                        <div id="quizBlock" class="quiz-block d-none"></div>
                        <a href="#" id="backToCourse" class="btn btn-outline-secondary mt-4"><i class="fas fa-arrow-left me-2"></i>Kembali ke Kursus</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5><i class="fas fa-graduation-cap me-2"></i>MariBelajar</h5>
                    <p class="text-muted">Platform e-learning terdepan yang membantu Anda mencapai impian melalui pembelajaran berkualitas.</p>
                    <div class="d-flex gap-3">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5>Kursus</h5>
                    <ul>
                        <li><a href="#">Web Development</a></li>
                        <li><a href="#">Mobile Development</a></li>
                        <li><a href="#">Data Science</a></li>
                        <li><a href="#">Digital Marketing</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5>Perusahaan</h5>
                    <ul>
                        <li><a href="about.html">Tentang Kami</a></li>
                        <li><a href="#">Karir</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Press</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5>Dukungan</h5>
                    <ul>
                        <li><a href="contact.html">Kontak</a></li>
                        <li><a href="#">Bantuan</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Komunitas</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5>Legal</h5>
                    <ul>
                        <li><a href="#">Syarat & Ketentuan</a></li>
                        <li><a href="#">Kebijakan Privasi</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                        <li><a href="#">GDPR</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom mt-4">
                <div class="row align-items-center">
                    <div class="col-md-6 text-md-start text-center mb-2 mb-md-0">
                        <p class="mb-0">&copy; 2024 MariBelajar. Semua hak dilindungi.</p>
                    </div>
                    <div class="col-md-6 text-md-end text-center">
                        <p class="mb-0">Dibuat dengan <i class="fas fa-heart text-danger"></i> untuk pendidikan Indonesia</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="js/courses-data.js"></script>
    <script>
        // Helper ambil parameter dari URL
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }
        // Render daftar pelajaran (sidebar)
        function renderLessonList(course, currentWeek) {
            const list = document.getElementById('lessonList');
            list.innerHTML = '';
            course.curriculum.forEach((item, idx) => {
                const week = item.week;
                const active = week == currentWeek ? 'active' : '';
                const el = document.createElement('a');
                el.className = `list-group-item list-group-item-action ${active}`;
                el.textContent = `Minggu ${week}: ${item.title}`;
                el.href = `lessons.html?course=${course.id}&week=${week}`;
                list.appendChild(el);
            });
        }
        // Render konten pelajaran utama
        function renderLessonContent(course, week) {
            const cur = course.curriculum.find(item => item.week == week);
            document.getElementById('lessonTitle').textContent = cur ? cur.title : 'Pelajaran Tidak Ditemukan';
            // Topik
            let topicsHtml = '';
            if (cur && cur.topics) {
                topicsHtml = '<ul>' + cur.topics.map(t => `<li>${t}</li>`).join('') + '</ul>';
            }
            document.getElementById('lessonTopics').innerHTML = topicsHtml;
            // Video
            const video = course.videos ? course.videos.find(v => v.week == week) : null;
            if (video) {
                document.getElementById('lessonVideo').classList.remove('d-none');
                document.getElementById('videoSource').src = video.file;
                document.getElementById('lessonVideo').load();
            } else {
                document.getElementById('lessonVideo').classList.add('d-none');
            }
            // Kuis
            const quiz = course.quizzes ? course.quizzes.find(q => q.week == week) : null;
            const quizBlock = document.getElementById('quizBlock');
            if (quiz && quiz.questions && quiz.questions.length > 0) {
                let quizHtml = '<h5>Kuis Minggu Ini</h5>';
                quiz.questions.forEach((q, i) => {
                    quizHtml += `<div class='mb-3'><div class='fw-bold mb-2'>${i+1}. ${q.question}</div>`;
                    q.options.forEach((opt, j) => {
                        quizHtml += `<div class='quiz-option'><input type='radio' name='quiz${i}' id='quiz${i}_opt${j}' value='${opt}' style='display:none;'><label for='quiz${i}_opt${j}'>${opt}</label></div>`;
                    });
                    quizHtml += '</div>';
                });
                quizHtml += `<button class='btn btn-primary mt-2' id='submitQuiz'>Kumpulkan Jawaban</button><div id='quizResult' class='mt-3'></div>`;
                quizBlock.innerHTML = quizHtml;
                quizBlock.classList.remove('d-none');
                // Event submit kuis
                setTimeout(() => {
                    document.getElementById('submitQuiz').onclick = function() {
                        let benar = 0;
                        quiz.questions.forEach((q, i) => {
                            const checked = document.querySelector(`input[name='quiz${i}']:checked`);
                            if (checked && checked.value === q.answer) benar++;
                        });
                        document.getElementById('quizResult').innerHTML = `<div class='alert alert-info'>Skor Anda: <b>${benar} / ${quiz.questions.length}</b></div>`;
                    };
                }, 100);
            } else {
                quizBlock.classList.add('d-none');
                quizBlock.innerHTML = '';
            }
        }
        // Inisialisasi halaman
        document.addEventListener('DOMContentLoaded', function() {
            const courseId = getUrlParameter('course');
            let week = getUrlParameter('week');
            const course = getCourseById(courseId);
            if (!course) {
                window.location.href = 'courses.html';
                return;
            }
            document.getElementById('courseTitle').textContent = course.title;
            document.getElementById('courseDesc').textContent = course.description;
            if (!week) week = 1;
            renderLessonList(course, week);
            renderLessonContent(course, week);
            document.getElementById('backToCourse').href = `course-detail.html?course=${course.id}`;
        });
    </script>
</body>

</html>